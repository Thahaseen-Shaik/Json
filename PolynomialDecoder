import java.io.*;
import java.math.BigInteger;

public class PolynomialDecoder {

    static String readFile(String filename) throws Exception {
        BufferedReader br = new BufferedReader(new FileReader(filename));
        StringBuilder sb = new StringBuilder();
        String line;
        while ((line = br.readLine()) != null)
            sb.append(line.trim());
        br.close();
        return sb.toString();
    }
    static BigInteger decode(String value, int base) {
        String digits = "0123456789abcdefghijklmnopqrstuvwxyz";
        value = value.toLowerCase();

        BigInteger result = BigInteger.ZERO;
        BigInteger b = BigInteger.valueOf(base);

        for (char c : value.toCharArray()) {
            int d = digits.indexOf(c);
            if (d < 0 || d >= base) {
                continue; 
            }
            result = result.multiply(b).add(BigInteger.valueOf(d));
        }
        return result;
    }
    static BigInteger computeC(String json) {
        BigInteger sum = BigInteger.ZERO;
        int i = 1;

        while (true) {
            String key = "\"" + i + "\":";
            int pos = json.indexOf(key);
            if (pos == -1) break; 
            int basePos = json.indexOf("\"base\"", pos);
            int baseColon = json.indexOf(":", basePos) + 1;
            int baseComma = json.indexOf(",", baseColon);
            String baseStr = json.substring(baseColon, baseComma).replace("\"", "").trim();
            int base = Integer.parseInt(baseStr);

            int valPos = json.indexOf("\"value\"", pos);
            int valColon = json.indexOf(":", valPos) + 1;
            int valEnd = json.indexOf("}", valColon);
            String valueStr = json.substring(valColon, valEnd).replace("\"", "").trim();

            BigInteger decoded = decode(valueStr, base);
            sum = sum.add(decoded);

            i++;
        }
        return sum;
    }

    public static void main(String[] args) throws Exception {

        String json1 = readFile("testcase1.json");
        String json2 = readFile("testcase2.json");

        BigInteger C1 = computeC(json1);
        BigInteger C2 = computeC(json2);

        System.out.println("Testcase 1 Output = " + C1);
        System.out.println("Testcase 2 Output = " + C2);
    }
}
